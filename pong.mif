-- null
DEPTH = 4096;
WIDTH = 32;

ADDRESS_RADIX = DEC;
DATA_RADIX = BIN;

CONTENT
BEGIN
    -- init: nop
0000 : 00000000000000000000000000000000;
    -- addi $20, $0, 1          # Set up 0x2000 (Keyboard)
0001 : 00101101000000000000000000000001;
    -- sll  $20, $20, 13        # 1 << 13 = 8192 (0x2000)
0002 : 00000101001010000000011010010000;
    -- addi $21, $0, 3          # Set up 0x3000 (VGA)
0003 : 00101101010000000000000000000011;
    -- sll  $21, $21, 12        # 3 << 12 = 12288 (0x3000)
0004 : 00000101011010100000011000010000;
    -- addi $22, $0, 640        # Screen Width
0005 : 00101101100000000000001010000000;
    -- addi $23, $0, 480        # Screen Height
0006 : 00101101110000000000000111100000;
    -- addi $24, $0, 40         # Paddle Height
0007 : 00101110000000000000000000101000;
    -- addi $25, $0, 3          # Paddle Speed
0008 : 00101110010000000000000000000011;
    -- addi $1, $0, 320         # Ball X = 320
0009 : 00101000010000000000000101000000;
    -- addi $2, $0, 240         # Ball Y = 240
0010 : 00101000100000000000000011110000;
    -- addi $3, $0, 1           # Vel X = 1
0011 : 00101000110000000000000000000001;
    -- addi $4, $0, 1           # Vel Y = 1
0012 : 00101001000000000000000000000001;
    -- addi $5, $0, 200         # Left Pad Y = 200
0013 : 00101001010000000000000011001000;
    -- addi $6, $0, 200         # Right Pad Y = 200
0014 : 00101001100000000000000011001000;
    -- game_loop: nop
0015 : 00000000000000000000000000000000;
    -- lw   $27, 0($20)         # Read Keyboard
0016 : 01000110111010000000000000000000;
    -- addi $26, $0, 119
0017 : 00101110100000000000000001110111;
    -- bne  $27, $26, check_s
0018 : 00010110111101000000000000000010;
    -- sub  $5,  $5,  $25       # Paddle L = Paddle L - Speed
0019 : 00000001010010111001000000000100;
    -- j    input_done
0020 : 00001000000000000000000000100011;
    -- check_s: nop
0021 : 00000000000000000000000000000000;
    -- addi $26, $0, 115
0022 : 00101110100000000000000001110011;
    -- bne  $27, $26, check_o
0023 : 00010110111101000000000000000010;
    -- add  $5,  $5,  $25       # Paddle L = Paddle L + Speed
0024 : 00000001010010111001000000000000;
    -- j    input_done
0025 : 00001000000000000000000000100011;
    -- check_o: nop
0026 : 00000000000000000000000000000000;
    -- addi $26, $0, 111
0027 : 00101110100000000000000001101111;
    -- bne  $27, $26, check_l
0028 : 00010110111101000000000000000010;
    -- sub  $6,  $6,  $25       # Paddle R = Paddle R - Speed
0029 : 00000001100011011001000000000100;
    -- j    input_done
0030 : 00001000000000000000000000100011;
    -- check_l: nop
0031 : 00000000000000000000000000000000;
    -- addi $26, $0, 108
0032 : 00101110100000000000000001101100;
    -- bne  $27, $26, input_done
0033 : 00010110111101000000000000000001;
    -- add  $6,  $6,  $25       # Paddle R = Paddle R + Speed
0034 : 00000001100011011001000000000000;
    -- input_done: nop
0035 : 00000000000000000000000000000000;
    -- blt  $5, $0, clamp_l_top
0036 : 00110001010000000000000000000001;
    -- j    check_l_bot
0037 : 00001000000000000000000000101000;
    -- clamp_l_top: nop
0038 : 00000000000000000000000000000000;
    -- addi $5, $0, 0
0039 : 00101001010000000000000000000000;
    -- check_l_bot: nop
0040 : 00000000000000000000000000000000;
    -- add  $1, $1, $3          # Ball X += Vel X
0041 : 00000000010000100011000000000000;
    -- add  $2, $2, $4          # Ball Y += Vel Y
0042 : 00000000100001000100000000000000;
    -- blt  $2, $0, invert_y
0043 : 00110000100000000000000000000010;
    -- blt  $23, $2, invert_y
0044 : 00110101110001000000000000000001;
    -- j    check_paddles       # No Y collision
0045 : 00001000000000000000000000110000;
    -- invert_y: nop
0046 : 00000000000000000000000000000000;
    -- sub  $4, $0, $4          # Vel Y = 0 - Vel Y (Negate)
0047 : 00000001000000000100000000000100;
    -- check_paddles: nop
0048 : 00000000000000000000000000000000;
    -- addi $26, $0, 30
0049 : 00101110100000000000000000011110;
    -- blt  $1, $26, check_hit_left
0050 : 00110000011101000000000000000011;
    -- addi $26, $0, 610
0051 : 00101110100000000000001001100010;
    -- blt  $26, $1, check_hit_right
0052 : 00110110100000100000000000000111;
    -- j    update_screen       # Ball is in middle of screen
0053 : 00001000000000000000000001001011;
    -- check_hit_left: nop
0054 : 00000000000000000000000000000000;
    -- blt  $2, $5, check_score_l 
0055 : 00110000100010100000000000001010;
    -- add  $26, $5, $24        # $26 = PaddleY + 40
0056 : 00000110100010111000000000000000;
    -- blt  $26, $2, check_score_l
0057 : 00110110100001000000000000001000;
    -- addi $3, $0, 1           # Force positive velocity (move right)
0058 : 00101000110000000000000000000001;
    -- j    update_screen
0059 : 00001000000000000000000001001011;
    -- check_hit_right: nop
0060 : 00000000000000000000000000000000;
    -- blt  $2, $6, check_score_r
0061 : 00110000100011000000000000000111;
    -- add  $26, $6, $24        # $26 = PaddleY + 40
0062 : 00000110100011011000000000000000;
    -- blt  $26, $2, check_score_r
0063 : 00110110100001000000000000000101;
    -- addi $3, $0, -1          # Force negative velocity (move left)
0064 : 00101000110000011111111111111111;
    -- j    update_screen
0065 : 00001000000000000000000001001011;
    -- check_score_l: nop
0066 : 00000000000000000000000000000000;
    -- blt  $1, $0, reset_ball
0067 : 00110000010000000000000000000100;
    -- j    update_screen
0068 : 00001000000000000000000001001011;
    -- check_score_r: nop
0069 : 00000000000000000000000000000000;
    -- blt  $22, $1, reset_ball
0070 : 00110101100000100000000000000001;
    -- j    update_screen
0071 : 00001000000000000000000001001011;
    -- reset_ball: nop
0072 : 00000000000000000000000000000000;
    -- addi $1, $0, 320         # Reset X
0073 : 00101000010000000000000101000000;
    -- addi $2, $0, 240         # Reset Y
0074 : 00101000100000000000000011110000;
    -- update_screen: nop
0075 : 00000000000000000000000000000000;
    -- sw   $1, 0($21)          # Write Ball X to 0x3000
0076 : 00111000011010100000000000000000;
    -- sw   $2, 1($21)          # Write Ball Y to 0x3001
0077 : 00111000101010100000000000000001;
    -- sw   $5, 2($21)          # Write Left Pad to 0x3002
0078 : 00111001011010100000000000000010;
    -- sw   $6, 3($21)          # Write Right Pad to 0x3003
0079 : 00111001101010100000000000000011;
    -- addi $26, $0, 1
0080 : 00101110100000000000000000000001;
    -- sll  $26, $26, 17        # ~131,072 loops
0081 : 00000110101101000000100010010000;
    -- delay_loop: nop
0082 : 00000000000000000000000000000000;
    -- addi $26, $26, -1        # Decrement
0083 : 00101110101101011111111111111111;
    -- bne  $26, $0, delay_loop # Loop until 0
0084 : 00010110100000011111111111111101;
    -- j    game_loop           # Repeat everything
0085 : 00001000000000000000000000001111;
[0086 .. 4095] : 00000000000000000000000000000000;
END;
