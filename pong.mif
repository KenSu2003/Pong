-- null
DEPTH = 4096;
WIDTH = 32;

ADDRESS_RADIX = DEC;
DATA_RADIX = BIN;

CONTENT
BEGIN
    -- init: nop
0000 : 00000000000000000000000000000000;
    -- addi $20, $0, 2000       # Keyboard Address
0001 : 00101101000000000000011111010000;
    -- addi $21, $0, 3000       # VGA Base Address
0002 : 00101101010000000000101110111000;
    -- addi $22, $0, 640        # Screen Width
0003 : 00101101100000000000001010000000;
    -- addi $23, $0, 480        # Screen Height
0004 : 00101101110000000000000111100000;
    -- addi $24, $0, 40         # Paddle Height
0005 : 00101110000000000000000000101000;
    -- addi $25, $0, 3          # Paddle Speed
0006 : 00101110010000000000000000000011;
    -- addi $1, $0, 320         # Ball X = 320
0007 : 00101000010000000000000101000000;
    -- addi $2, $0, 240         # Ball Y = 240
0008 : 00101000100000000000000011110000;
    -- addi $3, $0, 1           # Vel X = 1
0009 : 00101000110000000000000000000001;
    -- addi $4, $0, 1           # Vel Y = 1
0010 : 00101001000000000000000000000001;
    -- addi $5, $0, 200         # Left Pad Y = 200
0011 : 00101001010000000000000011001000;
    -- addi $6, $0, 200         # Right Pad Y = 200
0012 : 00101001100000000000000011001000;
    -- game_loop: nop
0013 : 00000000000000000000000000000000;
    -- lw   $27, 0($20)         # Read Keyboard from 2000
0014 : 01000110111010000000000000000000;
    -- addi $26, $0, 119
0015 : 00101110100000000000000001110111;
    -- bne  $27, $26, check_s
0016 : 00010110111101000000000000000010;
    -- sub  $5,  $5,  $25       # Paddle L = Paddle L - Speed
0017 : 00000001010010111001000000000100;
    -- j    input_done
0018 : 00001000000000000000000000100001;
    -- check_s: nop
0019 : 00000000000000000000000000000000;
    -- addi $26, $0, 115
0020 : 00101110100000000000000001110011;
    -- bne  $27, $26, check_o
0021 : 00010110111101000000000000000010;
    -- add  $5,  $5,  $25       # Paddle L = Paddle L + Speed
0022 : 00000001010010111001000000000000;
    -- j    input_done
0023 : 00001000000000000000000000100001;
    -- check_o: nop
0024 : 00000000000000000000000000000000;
    -- addi $26, $0, 111
0025 : 00101110100000000000000001101111;
    -- bne  $27, $26, check_l
0026 : 00010110111101000000000000000010;
    -- sub  $6,  $6,  $25       # Paddle R = Paddle R - Speed
0027 : 00000001100011011001000000000100;
    -- j    input_done
0028 : 00001000000000000000000000100001;
    -- check_l: nop
0029 : 00000000000000000000000000000000;
    -- addi $26, $0, 108
0030 : 00101110100000000000000001101100;
    -- bne  $27, $26, input_done
0031 : 00010110111101000000000000000001;
    -- add  $6,  $6,  $25       # Paddle R = Paddle R + Speed
0032 : 00000001100011011001000000000000;
    -- input_done: nop
0033 : 00000000000000000000000000000000;
    -- blt  $5, $0, clamp_l_top
0034 : 00110001010000000000000000000001;
    -- j    check_r_top
0035 : 00001000000000000000000000100110;
    -- clamp_l_top: nop
0036 : 00000000000000000000000000000000;
    -- addi $5, $0, 0
0037 : 00101001010000000000000000000000;
    -- check_r_top: nop
0038 : 00000000000000000000000000000000;
    -- blt  $6, $0, clamp_r_top
0039 : 00110001100000000000000000000001;
    -- j    physics
0040 : 00001000000000000000000000101011;
    -- clamp_r_top: nop
0041 : 00000000000000000000000000000000;
    -- addi $6, $0, 0
0042 : 00101001100000000000000000000000;
    -- physics: nop
0043 : 00000000000000000000000000000000;
    -- add  $1, $1, $3          # Ball X += Vel X
0044 : 00000000010000100011000000000000;
    -- add  $2, $2, $4          # Ball Y += Vel Y
0045 : 00000000100001000100000000000000;
    -- blt  $2, $0, invert_y
0046 : 00110000100000000000000000000010;
    -- blt  $23, $2, invert_y
0047 : 00110101110001000000000000000001;
    -- j    check_paddles       # No Y collision
0048 : 00001000000000000000000000110011;
    -- invert_y: nop
0049 : 00000000000000000000000000000000;
    -- sub  $4, $0, $4          # Vel Y = 0 - Vel Y (Negate)
0050 : 00000001000000000100000000000100;
    -- check_paddles: nop
0051 : 00000000000000000000000000000000;
    -- addi $26, $0, 30
0052 : 00101110100000000000000000011110;
    -- blt  $1, $26, check_hit_left
0053 : 00110000011101000000000000000011;
    -- addi $26, $0, 610
0054 : 00101110100000000000001001100010;
    -- blt  $26, $1, check_hit_right
0055 : 00110110100000100000000000001011;
    -- j    update_screen       # Ball is in middle of screen
0056 : 00001000000000000000000001010100;
    -- check_hit_left: nop
0057 : 00000000000000000000000000000000;
    -- blt  $2, $5, check_score_l 
0058 : 00110000100010100000000000010000;
    -- add  $26, $5, $24        # $26 = PaddleY + 40
0059 : 00000110100010111000000000000000;
    -- blt  $26, $2, check_score_l
0060 : 00110110100001000000000000001110;
    -- addi $26, $0, 1
0061 : 00101110100000000000000000000001;
    -- blt  $3, $26, do_bounce_l # Only bounce if moving left
0062 : 00110000111101000000000000000001;
    -- j    update_screen
0063 : 00001000000000000000000001010100;
    -- do_bounce_l: nop
0064 : 00000000000000000000000000000000;
    -- addi $3, $0, 1           
0065 : 00101000110000000000000000000001;
    -- j    update_screen
0066 : 00001000000000000000000001010100;
    -- check_hit_right: nop
0067 : 00000000000000000000000000000000;
    -- blt  $2, $6, check_score_r
0068 : 00110000100011000000000000001001;
    -- add  $26, $6, $24        # $26 = PaddleY + 40
0069 : 00000110100011011000000000000000;
    -- blt  $26, $2, check_score_r
0070 : 00110110100001000000000000000111;
    -- addi $26, $0, 0
0071 : 00101110100000000000000000000000;
    -- blt  $3, $26, update_screen # Only bounce if moving right
0072 : 00110000111101000000000000001011;
    -- addi $3, $0, -1          
0073 : 00101000110000011111111111111111;
    -- j    update_screen
0074 : 00001000000000000000000001010100;
    -- check_score_l: nop
0075 : 00000000000000000000000000000000;
    -- blt  $1, $0, reset_ball
0076 : 00110000010000000000000000000100;
    -- j    update_screen
0077 : 00001000000000000000000001010100;
    -- check_score_r: nop
0078 : 00000000000000000000000000000000;
    -- blt  $22, $1, reset_ball
0079 : 00110101100000100000000000000001;
    -- j    update_screen
0080 : 00001000000000000000000001010100;
    -- reset_ball: nop
0081 : 00000000000000000000000000000000;
    -- addi $1, $0, 320         # Reset X
0082 : 00101000010000000000000101000000;
    -- addi $2, $0, 240         # Reset Y
0083 : 00101000100000000000000011110000;
    -- update_screen: nop
0084 : 00000000000000000000000000000000;
    -- sw   $1, 0($21)          # Write Ball X to 3000
0085 : 00111000011010100000000000000000;
    -- sw   $2, 1($21)          # Write Ball Y to 3001
0086 : 00111000101010100000000000000001;
    -- sw   $5, 2($21)          # Write Left Pad to 3002
0087 : 00111001011010100000000000000010;
    -- sw   $6, 3($21)          # Write Right Pad to 3003
0088 : 00111001101010100000000000000011;
    -- addi $26, $0, 1
0089 : 00101110100000000000000000000001;
    -- sll  $26, $26, 10        # ~65,000 cycles delay
0090 : 00000110101101000000010100010000;
    -- delay_loop: nop
0091 : 00000000000000000000000000000000;
    -- addi $26, $26, -1        # Decrement
0092 : 00101110101101011111111111111111;
    -- bne  $26, $0, delay_loop # Loop until 0
0093 : 00010110100000011111111111111101;
    -- j    game_loop           # Repeat everything
0094 : 00001000000000000000000000001101;
[0095 .. 4095] : 00000000000000000000000000000000;
END;
